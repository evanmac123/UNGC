h1. 2011-07-17

* there are now a number of partials for displaying COPs depending on the view: Dashboard, public, feed
* the different partials populate the content for the dt and dd
* TODO the correct partial is determined in the two COP controllers, but this should be moved to the model in the case of further changes or customization for viewing COP results
* views/shared/cops:

*_cop_info_header* - title, publish date, period covered 
*_cop_questionnaire_results* - lists the COP question attributes and responses with a green check for 'Yes'
*_feed* - calls the new, basic, or legacy partials for displaying COP content in the atom feed
*_self_assessment* - Yes/No response to the 6 required COP criteria (only Yes responses are included in feed)
*_show_active_style* - Dashboard only view
*_show_advanced_style* - Dashboard only view 
*_show_basic_style* - results of Basic template COP. These COPs do not include files or links so we only show the results of their open text responses
*_show_differentiation_style* - for COPs submitted within the Differentiation Program
*_show_differentiation_style_public* - we need to include the cop_info_header in the public version
*_show_grace_style* - Grace Letters have the same Dashboard and public view
*_show_learner_style* - Dashboard only view
*_show_legacy_style* - for COPs submitted before 2010
*_show_new_style* - for COPs submitted in 2010, but before the Differentiation Program (also used by the feed)

h1. 2011-07-12

* move COP differentiation results into its own partial
* remove unused results from 'new' style COP
* 'new' means any COP submitted in 2010, until the Differentiation Program was launched in February 2011

h1. 2011-07-06

* when testing the COP controller, pass in COP options to override defaults
* necessary when testing the different types of COPs and templates
* if someone completes the Basic COP template and report a at the Learner level, are the correct partials being used?
* that's what needs to be tested

h1. 2011-07-03

* creating a new COP results screen to better inform participants of their Differentiation Level
* will need to use a number of partials since the information displayed will vary across the different types of COPs

h1. 2011-06-28

* to better alert participants that they are on the Learner Platform, we now indicate which required items in the COP are missing
* reused check/flag styles from the questionnaire
* also display an alert on the dashboard/public views

h1. 2011-06-02

* redirect users who try to login to a rejected organization
* this was causing some confusion as organizations that were eventually accepted were logging into the wrong account

h1. 2011-06-01

* save @contact.contact_info in @cop.contact_name
* Normally asked for all Advanced COPs, but we save the information for other COPs

h1. 2011-05-12

* list Advanced COPs in /COP/analyzing_progress/advanced_cops.html

h1. 2011-05-10

* now saving differentiation level in COP record, instead of calculating
* the requirements could change, so it's better to save the current level for each COP

h1. 2011-04-22

* Ask contacts to review and update their information if they haven't logged in for 6 months
* redirect them to edit screen, or send them on their way to the dashboard

h1. 2011-04-12

* add new roles for Website Editor (for controlling publishing rights) and Local Network Manager

h1. 2011-04-06

* Updated text in auto emails
* Copy Local Network (Network Report Recipient) instead of sending a separate email

# COP due in 90 days (cc)
# COP due in 30 days
# COP due today (cc)
# Expelled in 90 days
# Expelled in 30 days (cc)
# Expelled today (cc)

h1. 2011-03-26

* Companies that are expelled cannot submit a COP
* They must email a new Letter of Commitment to Participant Management, who will review and upload the file
* Once the file is uploaded, the option to submit a COP will appear in their dashboard
* The date of rejoining is then set when the next COP is submitted

h1. 2011-03-22

* don't allow existing participants to change their Letter of Commitment
* this is to prevent expelled companies from signing on again
* organizations in review can still do this

h1. 2011-03-19

* add text area to advanced COP to capture best practices not included in the questionnaire
* reusing the _description_ column to record answer

h1. 2011-03-17

* Grace Letter period rules were adjusted to allow companies to submit a Grace Letter at anytime
* 90 days will be added to the COP due date
* It won't have any effect if they've gone beyond their 90 day grace period, but it would delay their delisting
* You can't submit two grace letters in a row

h1. 2011-03-05

* Case Story submissions are now disabled by not displaying the 'new' button

h1. 2011-02-24

* Differentiation levels were launched to assigned labels based on the results of the self-assessment in the COP
* The levels are assigned to both COPs and companies, however the companies level is based on the latest COP
* The Organization and COP models contain methods for determining these levels
* In the views, the labels are conditionally displayed based on the type and status of the participant
* For example, non-business and expelled participants do not have their differentiation level displayed

h1. 2011-02-21

* added a new dynamic page for listing 'expelled' participants
* we changed the name from delisted to expelled on most public pages, but the code will still contain many references to delisted

h1. 2011-01-17

* we're tracking referrals for new participants from JCI (Junior Chamber International) members
* they're linking directly to the business participant signup page
* using session variables to track this information
* auto email is sent to JCI when someone completes the signup form

h1. 2011-01-10

* in addition to grouping COP questions, we want to tag questions in order to evaluate how the principles are being implemented
* adding an 'implementation' field to the CopQuestion model to categorize each question under one of four categories of implementation:

# Policy
# Process
# Monitoring
# Performance

* we can then group and evaluate the coverage of each implementation category
* added grouping select options to CopQuestion model instead of asking staff to type in the grouping name

* when creating a new COP, non-business goes straight to the Intermediate COP, instead of the COP introduction screen
* only business participants should be able to choose the type of COP

h1. 2011-01-06

* added ability to delete COPs from within the Dashboard
* :dependent => :destroy was not deleting the associated models, so a :before_destroy method was added to the COP model

h1. 2010-12-27

* a number of online registrations were being completed with the CEO entered as a Contact Point and vice versa
* after making the change in the database, a user function was created to make this change

* for pending organizations, we like to know if there are possible duplicate applications being submitted
* we run a search on all organization names when listing pending organizations
* but if Sphinx is indexing, we get an error, so I added "if ThinkingSphinx.sphinx_running?" before calling Organization.search

h1. 2010-12-10

* added PRME message at end of sign up process to encourage PRME participants to be Global Compact participants and vice versa

h1. 2010-12-09

* Change rules for Grace Period. It's now 90 days from the COP due date, not 90 days from the day the Grace Letter is submitted
* Non-Communicating companies that submit a Grace Letter stay Non-Communicating
* Delisted companies do not see the Grace Letter option

h1. 2010-12-01

* added descriptions for roles since participants were not sure which one to use
* General Contact is being phased out - it's not displayed as an option, although current General Contacts will not be deleted or have their role changed

h1. 2010-10-19

* Advanced Programme was launched Oct 11, 2010
* participants could answer the additional voluntary questions prior to this date
* however, those submitting after Oct 11 are considered to be participating in the programme
* created is_advanced_programme? method for COP to determine this

h1. 2010-08-25

* using hidden fields to pass Basic COP information, such as the format and principles covered
* their value will depend on whether the question is answered

h1. 2010-08-10

* COP scoring now only takes the number of questions at time of submission, instead of getting all of the questions.
* It's possible that new questions will be added, so we don't want previous submissions to have lower scores as a result

h1. 2010-08-02

* Creating a Basic COP that allows text entry instead of the multiple choice format
* Should be easier for less advanced ESG reports to submit a COP

h1. 2010-07-20

* removed question in COP form that asks if the COP is a file or web-based
* now a file is required and the web link is optional

h1. 2010-06-28

* TODO call javascript to show/hide publicly traded company options after JQuery is loaded

h1. 2010-06-14

* don't allow organization with existing names to be saved
* TODO should_validate_uniqueness_of :name in OrganizationTest

h1. 2010-06-10

* added other tabs to dashboard organization view
* transfer case story dates to updated_to
* UPDATE case_stories SET updated_at = CONCAT_WS(' ', case_date, '12:00:00') WHERE case_date IS NOT NULL

h1. 2010-06-09

* script/runner -e production TransferCopDates.new
* transferred all COP coverage dates, can now remove unused columns

h1. 2010-05-28

* copy old COP date fields to single fields
* cop.starts_on = Date.new(y=cop.start_year,m=cop.start_month,d=1).to_s
* cop.ends_on = Date.new(y=cop.end_year,m=cop.end_month,d=1).to_s
* delete old date coverage functions from cop model

h1. 2010-05-10

* remove auto rejection email for micro enterprise applications
* adding new rejection email for 

h1. 2010-04-26

* create new section in COP
* copy the following tables from staging to production:
# cop_questions
# cop_attributes

* add organization mailer to local network when comment is posted by participant