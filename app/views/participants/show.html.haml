%h1 Participant Information
%h2= @participant.name

%ul.nolist.participant_data.striped
  - [ ['Participant since', yyyy_mm_dd(@participant.joined_on)], ['Country', @participant.country_name], ['Organization Type', @participant.organization_type.name], ['Sector', @participant.sector_name] ].each do |label, data|
    %li{:class=>"clearfix #{cycle('even', 'odd')}"}
      .left
        %strong= "#{label}:"
      .right
        = data

  - unless @participant.commitment_letter_file_name.blank?
    %li{:class=>"clearfix #{cycle('even', 'odd')}",:title=>@participant.commitment_letter_file_name}
      .left
        %strong Letter of Commitment:
      .right= link_to truncate(@participant.commitment_letter_file_name), @participant.commitment_letter.url

  %li{:class=>"clearfix #{cycle('even', 'odd')}"}
    .left
      %strong Website:
    .right= @participant.url.blank? ? 'No address provided' : link_to(@participant.url, @participant.url)

  - unless @participant.stock_symbol.blank? || @participant.exchange.blank?
    %li{:class=>"clearfix #{cycle('even', 'odd')}"}
      .left
        %strong Financial Information:
      .right= link_to 'Google Finance', "http://finance.google.com/finance?q=%s:%s" % [@participant.exchange.code, @participant.stock_symbol]      

  - unless @participant.bhr_url.blank?
    %li{:class=>"clearfix #{cycle('even', 'odd')}"}
      .left
        %strong{:style=>'white-space: nowrap;'} Non-Financial Information:
      .right= link_to 'Business and Human Rights Resource Centre', 'http://www.business-humanrights.org/Categories/Individualcompanies/' + @participant.bhr_url

- if @participant.communication_on_progresses.new_policy.approved.any?
  .cop_links
    %h3 Communications on Progress
    
  %table.cop_links{:cellspacing=>0, :cellpadding=>0}
    %thead
      %tr
        %th Communication Title
        %th CEO Statement
        %th Issue Areas Covered
        %th Measurement of Outcome
    %tbody
      - for cop in @participant.communication_on_progresses.new_policy.approved do
        %tr{:title => cop.title}
          %td= link_to cop.title, cop_link(cop, params[:navigation])
          %td.center= check_if cop.include_continued_support_statement?
          %td.center== #{cop.score} / 4
          %td.center= check_if cop.include_measurement?
    
- if @participant.communication_on_progresses.old_policy.approved.any?
  .cop_links
  %h3 Communications on Progress (pre-2010)
  
  %table.cop_links{:cellspacing=>0, :cellpadding=>0}
    %thead
      %tr
        %th{:rowspan=>2} Submission Date
        %th{:rowspan=>2} Time Period Covered
        %th{:rowspan=>2} Communication Title
        %th{:colspan=>3} COP Elements
      %tr
        %th.check 1
        %th.check 2
        %th.check 3
    %tbody
      - for cop in  @participant.communication_on_progresses.old_policy.approved do
        %tr{:title => cop.title}
          %td.center= yyyy_mm_dd cop.added_on
          %td.center= date_range cop
          %td= link_to truncate(cop.title), cop_link(cop, params[:navigation])
          %td.center= check_if cop.include_ceo_letter?
          %td.center= check_if cop.include_actions?
          %td.center= check_if cop.include_measurement?

  %p COP Elements:
  %ol
    %li Statement of continued support for the Global Compact by the CEO or other senior executive
    %li Description of practical actions taken to implement the Global Compact principles
    %li Measurement of outcomes or expected outcomes

- if @participant.communication_on_progresses.approved.any?
  .note
    %p Note: Responsibility for the content of participants' Communication on Progress and any other public communication related to the Global Compact principles and their implementation lies with participants themselves and not with the UN Global Compact Office.
  
- if @participant.case_stories.any?
  .case_stories
    %h2 Case Stories
    %ul
    - for case_story in @participant.case_stories.approved do
      %li= link_to case_story.title, case_story_path(case_story.id)