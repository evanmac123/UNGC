indexer
{
  mem_limit = 32M
}

searchd
{
  listen = 127.0.0.1:9312
  log = /home/vkeesari/Sites/UNGC/log/searchd.log
  query_log = /home/vkeesari/Sites/UNGC/log/searchd.query.log
  pid_file = /home/vkeesari/Sites/UNGC/log/searchd.development.pid
  max_matches = 15000
}

source contact_core_0
{
  type = mysql
  sql_host = localhost
  sql_user = root
  sql_pass = 
  sql_db = unglobalcompact
  sql_query_pre = SET NAMES utf8
  sql_query_pre = SET TIME_ZONE = '+0:00'
  sql_query = SELECT SQL_NO_CACHE `contacts`.`id` * CAST(4 AS SIGNED) + 0 AS `id` , `contacts`.`first_name` AS `first_name`, `contacts`.`last_name` AS `last_name`, `contacts`.`middle_name` AS `middle_name`, `contacts`.`email` AS `email`, `contacts`.`id` AS `sphinx_internal_id`, 0 AS `sphinx_deleted`, 2212487076 AS `class_crc`, IFNULL('Contact', '') AS `sphinx_internal_class` FROM `contacts`  WHERE (`contacts`.`id` >= $start AND `contacts`.`id` <= $end) GROUP BY `contacts`.`id` ORDER BY NULL
  sql_query_range = SELECT IFNULL(MIN(`id`), 1), IFNULL(MAX(`id`), 1) FROM `contacts` 
  sql_attr_uint = sphinx_internal_id
  sql_attr_uint = sphinx_deleted
  sql_attr_uint = class_crc
  sql_attr_string = sphinx_internal_class
  sql_query_info = SELECT * FROM `contacts` WHERE `id` = (($id - 0) / 4)
}

index contact_core
{
  source = contact_core_0
  path = /home/vkeesari/Sites/UNGC/db/sphinx/development/contact_core
  charset_type = utf-8
  min_prefix_len = 4
  enable_star = 1
}

index contact
{
  type = distributed
  local = contact_core
}

source local_network_event_core_0
{
  type = mysql
  sql_host = localhost
  sql_user = root
  sql_pass = 
  sql_db = unglobalcompact
  sql_query_pre = SET NAMES utf8
  sql_query_pre = SET TIME_ZONE = '+0:00'
  sql_query = SELECT SQL_NO_CACHE `local_network_events`.`id` * CAST(4 AS SIGNED) + 1 AS `id` , `local_network_events`.`title` AS `title`, `local_network_events`.`description` AS `description`, `local_network_events`.`file_content` AS `file_content`, `local_network_events`.`id` AS `sphinx_internal_id`, 0 AS `sphinx_deleted`, 3744579485 AS `class_crc`, IFNULL('LocalNetworkEvent', '') AS `sphinx_internal_class`, UNIX_TIMESTAMP(`local_network_events`.`date`) AS `date`, `local_network_events`.`local_network_id` AS `local_network_id`, `local_network_events`.`country_id` AS `country_id`, CRC32(event_type) AS `event_type_crc`, CRC32(region) AS `region_crc`, GROUP_CONCAT(DISTINCT IFNULL(`principles`.`id`, '0') SEPARATOR ',') AS `principle_ids` FROM `local_network_events` LEFT OUTER JOIN `local_network_events_principles` ON `local_network_events_principles`.`local_network_event_id` = `local_network_events`.`id` LEFT OUTER JOIN `principles` ON `principles`.`id` = `local_network_events_principles`.`principle_id` WHERE (`local_network_events`.`id` >= $start AND `local_network_events`.`id` <= $end) GROUP BY `local_network_events`.`id` ORDER BY NULL
  sql_query_range = SELECT IFNULL(MIN(`id`), 1), IFNULL(MAX(`id`), 1) FROM `local_network_events` 
  sql_attr_uint = sphinx_internal_id
  sql_attr_uint = sphinx_deleted
  sql_attr_uint = class_crc
  sql_attr_uint = local_network_id
  sql_attr_uint = country_id
  sql_attr_uint = event_type_crc
  sql_attr_uint = region_crc
  sql_attr_timestamp = date
  sql_attr_multi = uint principle_ids from field
  sql_attr_string = sphinx_internal_class
  sql_query_info = SELECT * FROM `local_network_events` WHERE `id` = (($id - 1) / 4)
}

index local_network_event_core
{
  source = local_network_event_core_0
  path = /home/vkeesari/Sites/UNGC/db/sphinx/development/local_network_event_core
  charset_type = utf-8
}

index local_network_event
{
  type = distributed
  local = local_network_event_core
}

source organization_core_0
{
  type = mysql
  sql_host = localhost
  sql_user = root
  sql_pass = 
  sql_db = unglobalcompact
  sql_query_pre = SET NAMES utf8
  sql_query_pre = SET TIME_ZONE = '+0:00'
  sql_query = SELECT SQL_NO_CACHE `organizations`.`id` * CAST(4 AS SIGNED) + 2 AS `id` , `organizations`.`name` AS `name`, `organizations`.`id` AS `sphinx_internal_id`, 0 AS `sphinx_deleted`, 3655317636 AS `class_crc`, IFNULL('Organization', '') AS `sphinx_internal_class`, IFNULL(`organizations`.`name`, '') AS `name_sort`, `countries`.`id` AS `country_id`, IFNULL(`countries`.`name`, '') AS `country_name`, CRC32(`countries`.`name`) AS `country_name_facet`, `organization_types`.`type_property` AS `business`, `organization_types`.`id` AS `organization_type_id`, `sectors`.`id` AS `sector_id`, IFNULL(`sectors`.`name`, '') AS `sector_name`, CRC32(`sectors`.`name`) AS `sector_name_facet`, `listing_statuses`.`id` AS `listing_status_id`, IFNULL(`listing_statuses`.`name`, '') AS `listing_status_name`, CRC32(`listing_statuses`.`name`) AS `listing_status_name_facet`, CRC32(cop_state) AS `cop_state`, UNIX_TIMESTAMP(`organizations`.`joined_on`) AS `joined_on`, UNIX_TIMESTAMP(`organizations`.`delisted_on`) AS `delisted_on`, `organizations`.`is_ft_500` AS `is_ft_500`, IFNULL(`organizations`.`state`, '') AS `state`, `organizations`.`active` AS `active`, `organizations`.`participant` AS `participant` FROM `organizations` LEFT OUTER JOIN `countries` ON `countries`.`id` = `organizations`.`country_id` LEFT OUTER JOIN `organization_types` ON `organization_types`.`id` = `organizations`.`organization_type_id` LEFT OUTER JOIN `sectors` ON `sectors`.`id` = `organizations`.`sector_id` LEFT OUTER JOIN `listing_statuses` ON `listing_statuses`.`id` = `organizations`.`listing_status_id` WHERE (`organizations`.`id` >= $start AND `organizations`.`id` <= $end) GROUP BY `organizations`.`id` ORDER BY NULL
  sql_query_range = SELECT IFNULL(MIN(`id`), 1), IFNULL(MAX(`id`), 1) FROM `organizations` 
  sql_attr_uint = sphinx_internal_id
  sql_attr_uint = sphinx_deleted
  sql_attr_uint = class_crc
  sql_attr_uint = country_id
  sql_attr_uint = country_name_facet
  sql_attr_uint = business
  sql_attr_uint = organization_type_id
  sql_attr_uint = sector_id
  sql_attr_uint = sector_name_facet
  sql_attr_uint = listing_status_id
  sql_attr_uint = listing_status_name_facet
  sql_attr_uint = cop_state
  sql_attr_bool = is_ft_500
  sql_attr_bool = active
  sql_attr_bool = participant
  sql_attr_timestamp = joined_on
  sql_attr_timestamp = delisted_on
  sql_attr_string = sphinx_internal_class
  sql_attr_string = name_sort
  sql_attr_string = country_name
  sql_attr_string = sector_name
  sql_attr_string = listing_status_name
  sql_attr_string = state
  sql_query_info = SELECT * FROM `organizations` WHERE `id` = (($id - 2) / 4)
}

index organization_core
{
  source = organization_core_0
  path = /home/vkeesari/Sites/UNGC/db/sphinx/development/organization_core
  charset_type = utf-8
  min_prefix_len = 4
  enable_star = 1
}

index organization
{
  type = distributed
  local = organization_core
}

source searchable_core_0
{
  type = mysql
  sql_host = localhost
  sql_user = root
  sql_pass = 
  sql_db = unglobalcompact
  sql_query_pre = UPDATE `searchables` SET `delta` = 0 WHERE `delta` = 1
  sql_query_pre = SET NAMES utf8
  sql_query_pre = SET TIME_ZONE = '+0:00'
  sql_query = SELECT SQL_NO_CACHE `searchables`.`id` * CAST(4 AS SIGNED) + 3 AS `id` , `searchables`.`title` AS `title`, `searchables`.`content` AS `content`, `searchables`.`id` AS `sphinx_internal_id`, 0 AS `sphinx_deleted`, 3683684317 AS `class_crc`, IFNULL('Searchable', '') AS `sphinx_internal_class`, IFNULL(`searchables`.`document_type`, '') AS `document_type`, CRC32(`searchables`.`document_type`) AS `document_type_facet`, IFNULL(`searchables`.`url`, '') AS `url`, UNIX_TIMESTAMP(`searchables`.`last_indexed_at`) AS `last_indexed_at` FROM `searchables`  WHERE (`searchables`.`id` >= $start AND `searchables`.`id` <= $end AND `searchables`.`delta` = 0) GROUP BY `searchables`.`id` ORDER BY NULL
  sql_query_range = SELECT IFNULL(MIN(`id`), 1), IFNULL(MAX(`id`), 1) FROM `searchables` WHERE `searchables`.`delta` = 0
  sql_attr_uint = sphinx_internal_id
  sql_attr_uint = sphinx_deleted
  sql_attr_uint = class_crc
  sql_attr_uint = document_type_facet
  sql_attr_timestamp = last_indexed_at
  sql_attr_string = sphinx_internal_class
  sql_attr_string = document_type
  sql_attr_string = url
  sql_query_info = SELECT * FROM `searchables` WHERE `id` = (($id - 3) / 4)
}

index searchable_core
{
  source = searchable_core_0
  path = /home/vkeesari/Sites/UNGC/db/sphinx/development/searchable_core
  charset_type = utf-8
  min_prefix_len = 4
  enable_star = 1
}

source searchable_delta_0 : searchable_core_0
{
  type = mysql
  sql_host = localhost
  sql_user = root
  sql_pass = 
  sql_db = unglobalcompact
  sql_query_pre = 
  sql_query_pre = SET NAMES utf8
  sql_query_pre = SET TIME_ZONE = '+0:00'
  sql_query = SELECT SQL_NO_CACHE `searchables`.`id` * CAST(4 AS SIGNED) + 3 AS `id` , `searchables`.`title` AS `title`, `searchables`.`content` AS `content`, `searchables`.`id` AS `sphinx_internal_id`, 0 AS `sphinx_deleted`, 3683684317 AS `class_crc`, IFNULL('Searchable', '') AS `sphinx_internal_class`, IFNULL(`searchables`.`document_type`, '') AS `document_type`, CRC32(`searchables`.`document_type`) AS `document_type_facet`, IFNULL(`searchables`.`url`, '') AS `url`, UNIX_TIMESTAMP(`searchables`.`last_indexed_at`) AS `last_indexed_at` FROM `searchables`  WHERE (`searchables`.`id` >= $start AND `searchables`.`id` <= $end AND `searchables`.`delta` = 1) GROUP BY `searchables`.`id` ORDER BY NULL
  sql_query_range = SELECT IFNULL(MIN(`id`), 1), IFNULL(MAX(`id`), 1) FROM `searchables` WHERE `searchables`.`delta` = 1
  sql_attr_uint = sphinx_internal_id
  sql_attr_uint = sphinx_deleted
  sql_attr_uint = class_crc
  sql_attr_uint = document_type_facet
  sql_attr_timestamp = last_indexed_at
  sql_attr_string = sphinx_internal_class
  sql_attr_string = document_type
  sql_attr_string = url
  sql_query_info = SELECT * FROM `searchables` WHERE `id` = (($id - 3) / 4)
}

index searchable_delta : searchable_core
{
  source = searchable_delta_0
  path = /home/vkeesari/Sites/UNGC/db/sphinx/development/searchable_delta
}

index searchable
{
  type = distributed
  local = searchable_delta
  local = searchable_core
}
